<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>听风的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="听风的博客">
<meta property="og:url" content="http://showstone.net/index.html">
<meta property="og:site_name" content="听风的博客">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="听风的博客">
  
    <link rel="alternate" href="/atom.xml" title="听风的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">听风的博客</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">行走，辨思，记录</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://showstone.net"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-工具-2017-10-03-nas服务器的搭建-软件篇" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/uncategorized/2017/10/03/工具-2017-10-03-nas服务器的搭建-软件篇/" class="article-date">
  <time datetime="2017-10-02T18:38:09.000Z" itemprop="datePublished">2017-10-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/uncategorized/2017/10/03/工具-2017-10-03-nas服务器的搭建-软件篇/">NAS服务器的搭建-软件篇</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>顺利装好机器，是时候试试它的威力了，开始折腾软件.</p>
<h1 id="NAS服务器的搭建-软件篇"><a href="#NAS服务器的搭建-软件篇" class="headerlink" title="NAS服务器的搭建-软件篇"></a>NAS服务器的搭建-软件篇</h1><p>顺利装好机器，是时候试试它的威力了，开始折腾软件.</p>
<h2 id="NAS软件功能"><a href="#NAS软件功能" class="headerlink" title="NAS软件功能"></a>NAS软件功能</h2><ul>
<li>外网访问。这么牛逼的东东，光在家用怎么行，必须要能在公网访问啊</li>
<li>文件共享。如samba或者ftp</li>
<li>下载。要支持远程下载，http下载有aria2,bt/pt下载有transmission</li>
<li>DLNA服务。可以在线看视频啦~</li>
<li>iTunes媒体共享</li>
<li>time machine等备份服务</li>
<li>和百度云盘等公有云同步</li>
<li>类似于百度云等云盘的私有云服务</li>
</ul>
<h2 id="外网访问配置"><a href="#外网访问配置" class="headerlink" title="外网访问配置"></a>外网访问配置</h2><p>根据是否有公网ip，可以采用不同的方案。<br>我用的是电信光纤，是有公网ip的，这个具体和运营商有关，可以打客服电话，说要装监控，需要外网访问，看他怎么说。</p>
<h3 id="有公网Ip"><a href="#有公网Ip" class="headerlink" title="有公网Ip"></a>有公网Ip</h3><p>这种方案需要做端口映射。<br>首先找电信改成桥接模式，或者让电信给一个能做端口映射的光猫。<br>然后在路由器上设置端口映射或DMZ。<br>现在已经可以在公网上访问本机了，但是每次拨号ip都会变，最好能有一个域名，能通过这个域名知道现在的ip–这个就是DDNS服务了，大部分人用的都是花生壳的。具体方式请自行google</p>
<h3 id="没有公网ip"><a href="#没有公网ip" class="headerlink" title="没有公网ip"></a>没有公网ip</h3><p>可以使用内网穿透。网上评价很差，不建议使用。具体使用方式请自行google</p>
<h2 id="NAS软件方案"><a href="#NAS软件方案" class="headerlink" title="NAS软件方案"></a>NAS软件方案</h2><p>NAS服务器的软件，有几种方案:</p>
<ul>
<li>方案一：NAS裸机安装Windows，可在虚拟机中安装Linux，群晖，软路由。推荐。Windows对硬件兼容性好，驱动普遍支持，能无需配置充分发挥显卡性能，平时可做上网机，观影机，HTPC高清电视。</li>
<li>方案二：NAS裸机安装Linux，可在虚拟机中安装Windows，群晖，软路由。技术宅推荐。Windows还是有些缺陷的，系统及某些流氓软件会莫名其妙唤醒全部硬盘。只要能驱动，Linux多媒体不是问题。没有迅雷下载有点问题，移植的也麻烦，可以在Win虚拟机里面迅雷。</li>
<li>方案三：NAS裸机安装群晖，可在虚拟机中安装Windows，Linux，软路由。不推荐。NAS的显卡都浪费了。NAS中集成的功能当然做得很用户友好，非常方便。但是没有的功能很多需要自己编译源码，没有Linux发行版的软件仓库方便，很鸡肋。</li>
</ul>
<p>注1：以上群晖都可以换成其他NAS操作系统。<br>注2：不推荐裸机安装NAS操作系统。</p>
<p>以上内容来自：<a href="https://www.zhihu.com/question/21359049" target="_blank" rel="external">搭建家庭 NAS 服务器有什么好方案？</a></p>
<h2 id="NAS裸机安装Linux方案"><a href="#NAS裸机安装Linux方案" class="headerlink" title="NAS裸机安装Linux方案"></a>NAS裸机安装Linux方案</h2><p>选择NAS裸机安准Linux是因为我要跑脚本，用Linux会方便很多。同时，网上说的驱动问题我没有碰到，用最新版本的系统应该可以解决这个问题，毕竟Linux对Intel的支持还是很好的。我用的是Ubuntu 17.04.</p>
<p>对现有主流的NAS操作系统做了一个调研,发现NAS操作系统太重了，除openmeidavault外，都需要组Raid,对我而言没有必要。</p>
<ul>
<li><a href="http://www.how2shout.com/tools/best-free-open-source-nas-software.html" target="_blank" rel="external">http://www.how2shout.com/tools/best-free-open-source-nas-software.html</a></li>
<li><a href="http://storageroot.com/articles/nas4free-freenas-amahi-openmediavault" target="_blank" rel="external">http://storageroot.com/articles/nas4free-freenas-amahi-openmediavault</a></li>
</ul>
<p>其中，freenas和nas4free，都使用了ZFS文件系统，而ZFS文件系统依赖ECC内存，同时要求8G以上内存。<br>考虑以上原因，决定不上NAS操作系统。</p>
<h3 id="类似于百度云等云盘的私有云服务"><a href="#类似于百度云等云盘的私有云服务" class="headerlink" title="类似于百度云等云盘的私有云服务"></a>类似于百度云等云盘的私有云服务</h3><p>主流的方案有 owncloud和seafile。评测:<br><a href="https://www.zhihu.com/question/46318905" target="_blank" rel="external">https://www.zhihu.com/question/46318905</a></p>
<p>网上对seafile的评价较高，所以选择了seafile.具体如何，等我试用一个月再说~~</p>
<h3 id="文件共享"><a href="#文件共享" class="headerlink" title="文件共享"></a>文件共享</h3><ul>
<li>ftp/sftp文件协议。使用不方便，pass</li>
<li>SMB协议。操作方便，速度很快，推荐使用</li>
</ul>
<h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><p>留坑待填~~</p>
<h3 id="DLNA服务"><a href="#DLNA服务" class="headerlink" title="DLNA服务"></a>DLNA服务</h3><p>留坑待填~~</p>
<h3 id="iTunes媒体共享"><a href="#iTunes媒体共享" class="headerlink" title="iTunes媒体共享"></a>iTunes媒体共享</h3><p>留坑待填~~</p>
<h3 id="time-machine等备份服务"><a href="#time-machine等备份服务" class="headerlink" title="time machine等备份服务"></a>time machine等备份服务</h3><h4 id="mac"><a href="#mac" class="headerlink" title="mac"></a>mac</h4><ul>
<li>Netatalk。它是AFP协议的开源实现</li>
<li>Avahi。它是Apple’s Zeroconf 协议的开源实现<br>安装使用方式请自行百度。<br><strong><em>　注意文件的权限，建议可以先设成777，等没问题后再恢复　 </em></strong></li>
</ul>
<h3 id="和百度云盘等公有云同步"><a href="#和百度云盘等公有云同步" class="headerlink" title="和百度云盘等公有云同步"></a>和百度云盘等公有云同步</h3><p>留坑待填~~</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://showstone.net/uncategorized/2017/10/03/工具-2017-10-03-nas服务器的搭建-软件篇/" data-id="cj8tp2v73001gxb2samg9mxkm" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nas服务器/">NAS服务器</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-工具-2017-10-03-nas服务器的搭建-硬件篇" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/uncategorized/2017/10/03/工具-2017-10-03-nas服务器的搭建-硬件篇/" class="article-date">
  <time datetime="2017-10-02T18:37:59.000Z" itemprop="datePublished">2017-10-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/uncategorized/2017/10/03/工具-2017-10-03-nas服务器的搭建-硬件篇/">NAS服务器的搭建--硬件篇</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="方案"><a href="#方案" class="headerlink" title="方案"></a>方案</h2><p>现在主流的硬件服务器方案，有以下几种方案：</p>
<ul>
<li>使用群辉等现成的NAS解决方案<br>  优点是简单易上手，对技术的要求较低，有较多的资料和文档可以参考，而且插件较多，可以满足大部分的文件需求。缺点是贵，性价比很低，同时机器的性能很差，没有什么拓展能力。适合普通日常办公使用</li>
<li>使用HP gen8等商用服务器<br>  优点是硬件比较稳定，但是它的价格也比较贵，而且拓展能力不强。在朋友那看过后，发现gen8还有一个很严重的问题：风扇声音太大了！！！</li>
<li>自己组装机器<br>  其实网上已经有比较多的资料，找几篇来看看就可以了</li>
</ul>
<p>群晖的机器对我而言太贵了，HP gen8勉强够用，但是考虑到他的拓展性，还是选择自己组装一台机器。</p>
<h2 id="NAS服务器的要点"><a href="#NAS服务器的要点" class="headerlink" title="NAS服务器的要点"></a>NAS服务器的要点</h2><p>NAS服务器不同于一般的机器，它有以下特点:</p>
<ul>
<li>7*24小时开机，要稳定</li>
<li>盘位较多，最好是6盘位以上,一块系统盘，两块主数据盘，加一块工作盘，同时考虑到以后的拓展，预留两个盘位</li>
<li>安静</li>
<li>功耗低</li>
</ul>
<p>综合以上的特点，参考以上特点，选择自己想要的配置即可。</p>
<h2 id="我的配置"><a href="#我的配置" class="headerlink" title="我的配置"></a>我的配置</h2><p>关于硬件的选择，别人已经说得很详细了，我就不在啰嗦，有兴趣的可以参考：</p>
<ul>
<li><a href="https://www.zhihu.com/question/21359049" target="_blank" rel="external">搭建家庭 NAS 服务器有什么好方案？</a></li>
</ul>
<p>我的配置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">cpu: intel j3455，备选的有n3160, 都是连主板一起的，399元</div><div class="line">内存: 金士顿 ddr3 1600 4g，150元</div><div class="line">机箱: 酷冷至尊特警365，165包邮</div><div class="line">电源: 鑫谷核动力-巡洋舰c5 300w 109元</div><div class="line">共823元</div></pre></td></tr></table></figure>
<p><em>关于硬盘</em><br>硬盘需要单独拿出来说，一般建议买一块固态硬盘作为系统盘，大部分时间是没有数据操作的，这时机械硬盘可以休眠，单独使用固态硬盘即可。</p>
<p>数据盘，也就是机械硬盘，在买的时候需要注意一点：<br><strong>不要买同一品牌、同一批次的硬盘</strong>，因为在同样的环境下，同一品牌同一批次的硬盘，可能会同时坏！</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://showstone.net/uncategorized/2017/10/03/工具-2017-10-03-nas服务器的搭建-硬件篇/" data-id="cj8tp2v7e001qxb2sgjztjaaw" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nas服务器/">NAS服务器</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-工具-2017-10-03-nas服务器的搭建-介绍" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/uncategorized/2017/10/03/工具-2017-10-03-nas服务器的搭建-介绍/" class="article-date">
  <time datetime="2017-10-02T18:37:45.000Z" itemprop="datePublished">2017-10-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/uncategorized/2017/10/03/工具-2017-10-03-nas服务器的搭建-介绍/">NAS服务器的搭建-介绍</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>最近为了安装 huginn，在aws和 aliyun 上都尝试部署了，发现性能过差，服务很不稳定，就有了自己搭一台服务器的想法，恰好金华老师向我安利了一把 nas 服务器，在调研后，发现正好能满足我的要求。于是开始折腾，这个系统是对这次折腾的记录。</p>
<h2 id="用NAS服务器来做什么"><a href="#用NAS服务器来做什么" class="headerlink" title="用NAS服务器来做什么"></a>用NAS服务器来做什么</h2><p>NAS服务器能做的事情很多，比如：</p>
<p><em>文件服务</em></p>
<ul>
<li>私有文件云，类似于百度云盘，但是不用担心文件会忽然被和谐</li>
<li>文件共享服务，可以把所有的文件存放在同一个地方，并在不同的设备之间共享</li>
<li>文件备份服务，如mac的time machine,可以在连接wifi时自动开始同步</li>
<li>灵活的文件备份策略，可以定期把文件压缩加密后存到其他公有云盘</li>
<li>其他的服务，如远程下载功能，在公司启动下载服务后，自动在家开始下载</li>
</ul>
<p><em>其他服务</em></p>
<ul>
<li>在线工具服务</li>
<li>脚本和爬虫服务</li>
<li>私有git服务等其他服务</li>
<li>开发工具服务器，如mysql、监控等服务</li>
</ul>
<p>再开始选择之前，想清楚自己的需求，是作为一个简单的文件服务器，还是希望有更多的灵活性。</p>
<h2 id="备注"><a href="#备注" class="headerlink" title="备注"></a>备注</h2><p>huginn，一个IFTTT工具，利用它可以做很多很酷的事情，比如在几个网站监控某件商品，当有比较优惠的活动时，会自动发送通知，再如像葡萄PT只在特定的时间开放注册。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://showstone.net/uncategorized/2017/10/03/工具-2017-10-03-nas服务器的搭建-介绍/" data-id="cj8tp2v7a001nxb2s7zht52iy" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nas服务器/">NAS服务器</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-小功能-2017-08-22-下载超大的excel" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/小功能/2017/08/22/小功能-2017-08-22-下载超大的excel/" class="article-date">
  <time datetime="2017-08-22T10:42:31.000Z" itemprop="datePublished">2017-08-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/小功能/">小功能</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/小功能/2017/08/22/小功能-2017-08-22-下载超大的excel/">下载超大的excel</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h2><p>通过 POI的SXSSFWorkbook，使用操作系统的临时文件来作为缓存，可以生成超大的excel 文件（我自己测试到500W,就没往下测了）。</p>
<p>记得使用压缩。关键代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">SXSSFWorkbook wb = null;</div><div class="line">try &#123;</div><div class="line">	wb = new SXSSFWorkbook();</div><div class="line">	wb.setCompressTempFiles(true); //压缩临时文件，很重要，否则磁盘很快就会被写满</div><div class="line">	...</div><div class="line">&#125; finally &#123;</div><div class="line">	if (wb != null) &#123;</div><div class="line">		wb.dispose();// 删除临时文件，很重要，否则磁盘可能会被写满</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>由于业务需要，最近要做一个导出超大数据的功能。之间已经有人做过一版，由于受到POI 导出超大数据量时会出错的影响，它把一个大文件拆成很多个小文件，然后再压缩下载，结果经常出现少一两个文件的问题。</p>
<h2 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h2><p>支持单个 excel 的 sheet 导出100w 的数据</p>
<h2 id="方案"><a href="#方案" class="headerlink" title="方案"></a>方案</h2><h3 id="导出-csv-文件"><a href="#导出-csv-文件" class="headerlink" title="导出 csv 文件"></a>导出 csv 文件</h3><p>首先想到的是导出 csv 文件，最方便。但是调研后，也是最快放弃的，因为它存在两个很严重的问题：</p>
<ul>
<li>不同系统上的编码不一样，需要人工选择，对于普通用户不做好</li>
<li>没有优化和数据压缩，数据量越大，csv 文件的大小比 excel 更大，当数据导出超过10w 时，csv 文件大小是 excel 的1.5倍</li>
</ul>
<table>
<thead>
<tr>
<th>导出格式</th>
<th>1w</th>
<th>10w</th>
<th>30w</th>
<th>50w</th>
<th>70w</th>
<th>90w</th>
<th>100w</th>
</tr>
</thead>
<tbody>
<tr>
<td>csv</td>
<td>4.0K/120ms</td>
<td>50M/1261ms</td>
<td>160M/3828ms</td>
<td>271M/7415ms</td>
<td>381M/8929ms</td>
<td>491M/11356ms</td>
<td>546M/13688ms</td>
</tr>
</tbody>
</table>
<p><strong>每行30个字段,每个字段里的内容由 Math.random()产生</strong></p>
<h3 id="导出-excel-文件"><a href="#导出-excel-文件" class="headerlink" title="导出 excel 文件"></a>导出 excel 文件</h3><p>大数据量的情况下，csv 的表现较差。只能考虑 excel. 对 excel 作了一个简单的测试</p>
<table>
<thead>
<tr>
<th>指标</th>
<th>1w</th>
<th>2w</th>
<th>3w</th>
<th>4w</th>
<th>5w</th>
<th>6w</th>
<th>7w</th>
<th>8w</th>
<th>10w</th>
</tr>
</thead>
<tbody>
<tr>
<td>耗时</td>
<td>3326ms</td>
<td>6483ms</td>
<td>7894 ms</td>
<td>9899 ms</td>
<td>12873 ms</td>
<td>15198 ms</td>
<td>17362 ms</td>
<td>20106 ms</td>
<td>25494 ms</td>
</tr>
<tr>
<td>导出文件大小</td>
<td>3.7M</td>
<td>7.4MM</td>
<td>12M</td>
<td>15M</td>
<td>19M</td>
<td>23M</td>
<td>26M</td>
<td>30M</td>
<td>37M</td>
</tr>
<tr>
<td>cpu 使用率</td>
<td>100%</td>
<td>100%</td>
<td>100%</td>
<td>100%</td>
<td>100%</td>
<td>200%</td>
<td>200%</td>
<td>800%</td>
<td>900%</td>
</tr>
</tbody>
</table>
<p><strong>cpu 使用率均指稳定时的 cpu 使用率</strong></p>
<p>发现几个很严重的问题：</p>
<ul>
<li>随着数据量的增大，cpu使用率直线上升，这会给系统带来很大的风险</li>
<li>当数据量超过10w 时，会出现 OOM 异常</li>
</ul>
<p>excel 在内存里存储地越来越大，研究到了瓶颈。要解决这个问题，有两种方案：</p>
<ul>
<li>先生成多个小 execel 文件，最后合并成一个大文件。查了文档，发现Java 里的工具都是先读出来，再写到 Workbook 对象里, 这样还是会碰到同样的问题。如果用 excel 的工具，则运维成本过大，因此这个方案行不通</li>
<li>参考操作系统里的虚拟内存，用这个来突破 机器的内存限制。但是磁盘的性能很差，这样做的效率很低。</li>
</ul>
<p>这时，在 POI 的文档里发现了SXSSFWorkbook，其支持使用临时文件，可以用来生成超大 Excel 文件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">Since 3.8-beta3, POI provides a low-memory footprint SXSSF API built on top of XSSF.</div><div class="line"></div><div class="line">SXSSF is an API-compatible streaming extension of XSSF to be used when very large</div><div class="line"> spreadsheets have to be produced, and heap space is limited. SXSSF achieves its</div><div class="line"> low memory footprint by limiting access to the rows that are within a sliding window,</div><div class="line"> while XSSF gives access to all rows in the document. Older rows that are no longer</div><div class="line"> in the window become inaccessible, as they are written to the disk.</div><div class="line"></div><div class="line">In auto-flush mode the size of the access window can be specified, to hold a certain</div><div class="line">number of rows in memory. When that value is reached, the creation of an additional</div><div class="line">row causes the row with the lowest index to to be removed from the access window and</div><div class="line">written to disk. Or, the window size can be set to grow dynamically; it can be trimmed</div><div class="line">periodically by an explicit call to flushRows(int keepRows) as needed.</div><div class="line"></div><div class="line">Due to the streaming nature of the implementation, there are the following</div><div class="line">limitations when compared to XSSF:</div><div class="line"> * Only a limited number of rows are accessible at a point in time.</div><div class="line"> * Sheet.clone() is not supported.</div><div class="line"> * Formula evaluation is not supported</div></pre></td></tr></table></figure>
<p>以下是 SXSSFWorkbook的测试结果：</p>
<p>使用缓存文件导出 excel</p>
<table>
<thead>
<tr>
<th>指标</th>
<th>10w</th>
<th>20w</th>
<th>30w</th>
<th>50w</th>
<th>80w</th>
<th>100w</th>
<th>150w</th>
<th>200w</th>
<th>300w</th>
</tr>
</thead>
<tbody>
<tr>
<td>导出文件大小</td>
<td>37M</td>
<td>74M</td>
<td>111M</td>
<td>184M</td>
<td>295M</td>
<td>368M</td>
<td>552M</td>
<td>736M</td>
<td>1.1G</td>
</tr>
<tr>
<td>耗时（ms）</td>
<td>16259</td>
<td>29516</td>
<td>45846</td>
<td>75503</td>
<td>120434</td>
<td>156484</td>
<td>233730</td>
<td>303510</td>
<td>463399</td>
</tr>
<tr>
<td>cpu 使用率</td>
<td>100</td>
<td>100</td>
<td>100</td>
<td>100</td>
<td>100</td>
<td>100</td>
<td>100</td>
<td>100</td>
<td>100</td>
</tr>
<tr>
<td>内存使用(k)</td>
<td>149460</td>
<td>176576</td>
<td>141940</td>
<td>143700</td>
<td>168460</td>
<td>180168</td>
<td>169632</td>
<td>198320</td>
<td>187484</td>
</tr>
<tr>
<td>缓存文件大小</td>
<td>37M</td>
<td>74M</td>
<td>111M</td>
<td>185M</td>
<td>295M</td>
<td>369M</td>
<td>553M</td>
<td>737M</td>
<td>1.1G</td>
</tr>
</tbody>
</table>
<p> 可以看到，其在性能与资源耗用上都比较平均，至此，问题完美解决。</p>
<p><strong>SXSSFWorkbook在使用上有一些注意项</strong></p>
<ul>
<li>Note that SXSSF allocates temporary files that you must always clean up explicitly, by calling the dispose method.</li>
<li>​</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">SXSSF flushes sheet data in temporary files (a temp file per sheet) and the size</div><div class="line">of these temporary files can grow to a very large value. For example, for a 20 MB</div><div class="line">csv data the size of the temp xml becomes more than a gigabyte. If the size of the</div><div class="line"> temp files is an issue, you can tell SXSSF to use gzip compression:</div><div class="line"></div><div class="line">  SXSSFWorkbook wb = new SXSSFWorkbook();</div><div class="line">  wb.setCompressTempFiles(true); // temp files will be gzipped</div></pre></td></tr></table></figure>
<h2 id="测试代码"><a href="#测试代码" class="headerlink" title="测试代码"></a>测试代码</h2><h3 id="生成-csv"><a href="#生成-csv" class="headerlink" title="生成 csv"></a>生成 csv</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">private static void prcoessCSV(int rowsNum) throws Exception &#123;</div><div class="line">    try &#123;</div><div class="line">        long startTime = System.currentTimeMillis();</div><div class="line">        final int NUM_OF_ROWS = rowsNum;</div><div class="line">        final int NUM_OF_COLUMNS = 30;</div><div class="line"></div><div class="line"></div><div class="line">        File file = new File(&quot;ooxml-scatter-chart_&quot; + rowsNum + &quot;.csv&quot;);</div><div class="line">        BufferedWriter bf = new BufferedWriter(new FileWriter(file));</div><div class="line">        StringBuffer sb = new StringBuffer();</div><div class="line">        try &#123;</div><div class="line">            for (int rownum = 0; rownum &lt; NUM_OF_ROWS; rownum++) &#123;</div><div class="line">                for (int cellnum = 0; cellnum &lt; NUM_OF_COLUMNS; cellnum++) &#123;</div><div class="line">                    sb.append(Math.random());</div><div class="line">                    if ((cellnum + 1) != NUM_OF_COLUMNS) &#123;</div><div class="line">                        sb.append(&quot;,&quot;);</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                sb.append(&quot;\n&quot;);</div><div class="line">                if (rownum % 10000 == 0) &#123;</div><div class="line">                    bf.write(sb.toString());</div><div class="line">                    sb = new StringBuffer();</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            bf.close();</div><div class="line">        &#125; catch (Exception ex) &#123;</div><div class="line">            ex.printStackTrace();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        long endTime = System.currentTimeMillis();</div><div class="line">        System.out.println(&quot;process &quot; + rowsNum + &quot; spent time:&quot; + (endTime - startTime));</div><div class="line"></div><div class="line">    &#125; catch (Exception e) &#123;</div><div class="line">        e.printStackTrace();</div><div class="line">        throw e;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="excel，不使用缓存"><a href="#excel，不使用缓存" class="headerlink" title="excel，不使用缓存"></a>excel，不使用缓存</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">try &#123;</div><div class="line">     long startTime = System.currentTimeMillis();</div><div class="line">     final int NUM_OF_ROWS = rowsNum;</div><div class="line">     final int NUM_OF_COLUMNS = 30;</div><div class="line"></div><div class="line"></div><div class="line">     Workbook wb = new XSSFWorkbook();</div><div class="line">     Sheet sheet = wb.createSheet(&quot;Sheet 1&quot;);</div><div class="line">     // Create a row and put some cells in it. Rows are 0 based.</div><div class="line">     Row row;</div><div class="line">     Cell cell;</div><div class="line">     for (int rowIndex = 0; rowIndex &lt; NUM_OF_ROWS; rowIndex++) &#123;</div><div class="line">         row = sheet.createRow(rowIndex);</div><div class="line">         for (int colIndex = 0; colIndex &lt; NUM_OF_COLUMNS; colIndex++) &#123;</div><div class="line">             cell = row.createCell(colIndex);</div><div class="line">             cell.setCellValue(Math.random());</div><div class="line">         &#125;</div><div class="line">     &#125;</div><div class="line"></div><div class="line">     // Write the output to a file</div><div class="line">     FileOutputStream out = new FileOutputStream(&quot;ooxml-scatter-chart_XSSF_&quot; + rowsNum + &quot;.xlsx&quot;);</div><div class="line">     wb.write(out);</div><div class="line">     out.close();</div><div class="line">     wb.close();</div><div class="line"></div><div class="line">     long endTime = System.currentTimeMillis();</div><div class="line">     System.out.println(&quot;process &quot; + rowsNum + &quot; spent time:&quot; + (endTime - startTime));</div><div class="line"></div><div class="line"> &#125; catch (Exception e) &#123;</div><div class="line">     e.printStackTrace();</div><div class="line">     throw e;</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
<h3 id="excel-使用缓存"><a href="#excel-使用缓存" class="headerlink" title="excel,使用缓存"></a>excel,使用缓存</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">try &#123;</div><div class="line">     long startTime = System.currentTimeMillis();</div><div class="line">     final int NUM_OF_ROWS = rowsNum;</div><div class="line">     final int NUM_OF_COLUMNS = 30;</div><div class="line"></div><div class="line">     SXSSFWorkbook wb = null;</div><div class="line">     try &#123;</div><div class="line">         wb = new SXSSFWorkbook();</div><div class="line">         wb.setCompressTempFiles(true); //压缩临时文件，很重要，否则磁盘很快就会被写满</div><div class="line">         Sheet sh = wb.createSheet();</div><div class="line">         int rowNum = 0;</div><div class="line">         for (int num = 0; num &lt; NUM_OF_ROWS; num++) &#123;</div><div class="line">             if (num % 100_0000 == 0) &#123;</div><div class="line">                 sh = wb.createSheet(&quot;sheet &quot; + num);</div><div class="line">                 rowNum = 0;</div><div class="line">             &#125;</div><div class="line">             rowNum++;</div><div class="line">             Row row = sh.createRow(rowNum);</div><div class="line">             for (int cellnum = 0; cellnum &lt; NUM_OF_COLUMNS; cellnum++) &#123;</div><div class="line">                 Cell cell = row.createCell(cellnum);</div><div class="line">                 cell.setCellValue(Math.random());</div><div class="line">             &#125;</div><div class="line">         &#125;</div><div class="line"></div><div class="line">         FileOutputStream out = new FileOutputStream(&quot;ooxml-scatter-chart_SXSSFW_&quot; + rowsNum + &quot;.xlsx&quot;);</div><div class="line">         wb.write(out);</div><div class="line">         out.close();</div><div class="line">     &#125; catch (Exception ex) &#123;</div><div class="line">         ex.printStackTrace();</div><div class="line">     &#125; finally &#123;</div><div class="line">         if (wb != null) &#123;</div><div class="line">             wb.dispose();// 删除临时文件，很重要，否则磁盘可能会被写满</div><div class="line">         &#125;</div><div class="line">     &#125;</div><div class="line"></div><div class="line">     long endTime = System.currentTimeMillis();</div><div class="line">     System.out.println(&quot;process &quot; + rowsNum + &quot; spent time:&quot; + (endTime - startTime));</div><div class="line"> &#125; catch (Exception e) &#123;</div><div class="line">     e.printStackTrace();</div><div class="line">     throw e;</div><div class="line"> &#125;</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://showstone.net/小功能/2017/08/22/小功能-2017-08-22-下载超大的excel/" data-id="cj8tp2v77001kxb2sypf6unh7" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/下载/">下载</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/导出/">导出</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/超大excel/">超大excel</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-三瓜两爪-2017-07-23-克制" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/java/2017/07/23/三瓜两爪-2017-07-23-克制/" class="article-date">
  <time datetime="2017-07-23T06:32:30.000Z" itemprop="datePublished">2017-07-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/java/">Java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/java/2017/07/23/三瓜两爪-2017-07-23-克制/"> 克制</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>每天都会接触到很多的事物，如新游戏、好电影、很火的小说，抑或是新的流行语言、有趣的发现等，这些东西是如此有趣，以至于每件事都想尝试一下。然而一个残酷的现实就是我们根本没有这么多的时间和精力去处理这么多的信息，也做不好那么多感兴趣的事情。我们的精力是如此有限，如果不注意保护，等精力被耗尽之后,工作的就不是大脑,而是肌肉了.</p>
<p>慢慢发现，碎片化的时间配碎片化的事情会更合适一些，比如地铁上刷RSS和微博，等到电脑前就专心做需要一整块时间的事。RSS和知乎这类流媒体有一个很大的特点，就是信息流基本上是无限的，只要你愿意，可以一直往下刷，而时间也在不知不觉中耗尽。如果是在碎片化的时间做这类事情，就不会发生这种事情，因为会被自然打断：要下车了。</p>
<p>人接受新事物是需要耗费能量的，如果在碎片化的事情上花费太多的精力，会反过来抵制我们做核心工作的能力。但是碎片化的消息本身是无法避免的，所以需要一套机制，能让我们在接受碎片化信息的同时，不耗费过多的精力和时间。实践下来，做一个筛选会提高很多的效率：<br>    快速过滤，选出重点-&gt;细读资料后作整理、分类</p>
<p>在整理时，会发现有趣的、需要知道的、想知道的东西太多，然而精力非常有限，所以我们需要保持克制，合适的时候，要能丢掉一部分资料，也丢掉一部分兴趣。对于自己的欲望，始终保持克制</p>
<p>克制是一种美德</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://showstone.net/java/2017/07/23/三瓜两爪-2017-07-23-克制/" data-id="cj8tp2v71001dxb2s8av43q78" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/克制/">克制</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/时间管理/">时间管理</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/精力管理/">精力管理</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-mybatis源码分析-2015-07-23-mybatis源码分析" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/mybatis源码分析/2017/03/07/mybatis源码分析-2015-07-23-mybatis源码分析/" class="article-date">
  <time datetime="2017-03-07T08:20:00.000Z" itemprop="datePublished">2017-03-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/mybatis源码分析/">Mybatis源码分析</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/mybatis源码分析/2017/03/07/mybatis源码分析-2015-07-23-mybatis源码分析/">mybatis结构分析</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ul>
<li>JDBC方式的几个缺点</li>
<li>MyBatis的解决方法</li>
<li><p>MyBatis的结构框架</p>
<h2 id="JDBC方式的几个缺点"><a href="#JDBC方式的几个缺点" class="headerlink" title="JDBC方式的几个缺点"></a>JDBC方式的几个缺点</h2><p>  所有用</p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://showstone.net/mybatis源码分析/2017/03/07/mybatis源码分析-2015-07-23-mybatis源码分析/" data-id="cj8tp2v6i000uxb2swnsnb8mn" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mybatsis/">MyBatsis</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/源码/">源码</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/结构/">结构</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/设计/">设计</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-java容器-2015-06-27-copyonwritearray浅析" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/java容器/2017/03/07/java容器-2015-06-27-copyonwritearray浅析/" class="article-date">
  <time datetime="2017-03-07T08:20:00.000Z" itemprop="datePublished">2017-03-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/java容器/">java容器</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/java容器/2017/03/07/java容器-2015-06-27-copyonwritearray浅析/">CopyOnWriteArray浅析</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ul>
<li>CopyOnWriteArrayList的特点与用法</li>
<li>CopyOnWriteArrayList的数据结构</li>
<li>CopyOnWriteArrayList的常用方法及实现</li>
</ul>
<h2 id="CopyOnWriteArrayList的特点与用法"><a href="#CopyOnWriteArrayList的特点与用法" class="headerlink" title="CopyOnWriteArrayList的特点与用法"></a>CopyOnWriteArrayList的特点与用法</h2><p>CopyOnWriteArrayList的数据结构和用法与ArrayList基本都相同,区别主要在于CopyOnWriteArrayList在添加和删除元素等修改集合状态的操作时，都会重新复制一个新的数组，以保证多线程下的安全性。因为每次修改数据结点都要复制整个对象数组，会比较耗时间，所以CopyOnWriteArrayList适合读多写少情况下的多线程场景，如缓存之类的。</p>
<h2 id="CopyOnWriteArrayList的数据结构"><a href="#CopyOnWriteArrayList的数据结构" class="headerlink" title="CopyOnWriteArrayList的数据结构"></a>CopyOnWriteArrayList的数据结构</h2><p>CopyOnWriteArrayList的数据结构与ArrayList的基本一样，只是它不再有扩容之类的操作，因为每次修改都是一个新的数组。。。</p>
<h2 id="CopyOnWriteArrayList的常用方法及实现"><a href="#CopyOnWriteArrayList的常用方法及实现" class="headerlink" title="CopyOnWriteArrayList的常用方法及实现"></a>CopyOnWriteArrayList的常用方法及实现</h2><pre><code>public class CopyOnWriteArrayList&lt;E&gt;
    implements List&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable {
    ...
}
</code></pre><p>从CopyOnWriteArrayList的类结构就可以看出，它的方法签名与ArrayList基本一致，这里就不再重复了。下面讲讲它方法的特殊实现。</p>
<ol>
<li><p>构造方法<br> CopyOnWriteArrayList的默认构造方法会创建一个长度为0的数组来储存数据，而不是像ArrayList那样创建一个长度为10的数组</p>
<pre><code>/**Sets the array. */    
final void setArray(Object[] a) {
  array = a;
}

/**
* Creates an empty list.
*/
public CopyOnWriteArrayList() {
    setArray(new Object[0]);
}
</code></pre></li>
<li><p>添加方法</p>
<pre><code>/**
 * Appends the specified element to the end of this list.
 *
 * @param e element to be appended to this list
 * @return {@code true} (as specified by {@link Collection#add})
 */
public boolean add(E e) {
    final ReentrantLock lock = this.lock;
    lock.lock();
    try {
        Object[] elements = getArray();
        int len = elements.length;
        Object[] newElements = Arrays.copyOf(elements, len + 1);
        newElements[len] = e;
        setArray(newElements);
        return true;
    } finally {
        lock.unlock();
    }
}

/**
 * Inserts the specified element at the specified position in this
 * list. Shifts the element currently at that position (if any) and
 * any subsequent elements to the right (adds one to their indices).
 *
 * @throws IndexOutOfBoundsException {@inheritDoc}
 */
public void add(int index, E element) {
    final ReentrantLock lock = this.lock;
    lock.lock();
    try {
        Object[] elements = getArray();
        int len = elements.length;
        if (index &gt; len || index &lt; 0)
            throw new IndexOutOfBoundsException(&quot;Index: &quot;+index+
                                                &quot;, Size: &quot;+len);
        Object[] newElements;
        int numMoved = len - index;
        if (numMoved == 0)
            newElements = Arrays.copyOf(elements, len + 1);
        else {
            newElements = new Object[len + 1];
            System.arraycopy(elements, 0, newElements, 0, index);
            System.arraycopy(elements, index, newElements, index + 1,
                             numMoved);
        }
        newElements[index] = element;
        setArray(newElements);
    } finally {
        lock.unlock();
    }
}
</code></pre></li>
<li><p>修改方法</p>
<p>方法在进入和退出时有加锁、释放锁</p>
<pre><code>/**
 * Replaces the element at the specified position in this list with the
 * specified element.
 *
 * @throws IndexOutOfBoundsException {@inheritDoc}
 */
public E set(int index, E element) {
    final ReentrantLock lock = this.lock;
    lock.lock();
    try {
        Object[] elements = getArray();
        E oldValue = get(elements, index);

        if (oldValue != element) {
            int len = elements.length;
            Object[] newElements = Arrays.copyOf(elements, len);
            newElements[index] = element;
            setArray(newElements);
        } else {
            // Not quite a no-op; ensures volatile write semantics
            setArray(elements);
        }
        return oldValue;
    } finally {
        lock.unlock();
    }
}
</code></pre></li>
<li><p>删除方法</p>
<pre><code>/**
 * Removes the element at the specified position in this list.
 * Shifts any subsequent elements to the left (subtracts one from their
 * indices).  Returns the element that was removed from the list.
 *
 * @throws IndexOutOfBoundsException {@inheritDoc}
 */
public E remove(int index) {
    final ReentrantLock lock = this.lock;
    lock.lock();
    try {
        Object[] elements = getArray();
        int len = elements.length;
        E oldValue = get(elements, index);
        int numMoved = len - index - 1;
        if (numMoved == 0)
            setArray(Arrays.copyOf(elements, len - 1));
        else {
            Object[] newElements = new Object[len - 1];
            System.arraycopy(elements, 0, newElements, 0, index);
            System.arraycopy(elements, index + 1, newElements, index,
                             numMoved);
            setArray(newElements);
        }
        return oldValue;
    } finally {
        lock.unlock();
    }
}

/**
 * Removes the first occurrence of the specified element from this list,
 * if it is present.  If this list does not contain the element, it is
 * unchanged.  More formally, removes the element with the lowest index
 * {@code i} such that
 * &lt;tt&gt;(o==null&amp;nbsp;?&amp;nbsp;get(i)==null&amp;nbsp;:&amp;nbsp;o.equals(get(i)))&lt;/tt&gt;
 * (if such an element exists).  Returns {@code true} if this list
 * contained the specified element (or equivalently, if this list
 * changed as a result of the call).
 *
 * @param o element to be removed from this list, if present
 * @return {@code true} if this list contained the specified element
 */
public boolean remove(Object o) {
    Object[] snapshot = getArray();
    int index = indexOf(o, snapshot, 0, snapshot.length);
    return (index &lt; 0) ? false : remove(o, snapshot, index);
}

/**
 * A version of remove(Object) using the strong hint that given
 * recent snapshot contains o at the given index.
 */
private boolean remove(Object o, Object[] snapshot, int index) {
    final ReentrantLock lock = this.lock;
    lock.lock();
    try {
        Object[] current = getArray();
        int len = current.length;
        if (snapshot != current) findIndex: {
            int prefix = Math.min(index, len);
            for (int i = 0; i &lt; prefix; i++) {
                if (current[i] != snapshot[i] &amp;&amp; eq(o, current[i])) {
                    index = i;
                    break findIndex;
                }
            }
            if (index &gt;= len)
                return false;
            if (current[index] == o)
                break findIndex;
            index = indexOf(o, current, index, len);
            if (index &lt; 0)
                return false;
        }
        Object[] newElements = new Object[len - 1];
        System.arraycopy(current, 0, newElements, 0, index);
        System.arraycopy(current, index + 1,
                         newElements, index,
                         len - index - 1);
        setArray(newElements);
        return true;
    } finally {
        lock.unlock();
    }
}

/**
 * Removes from this list all of the elements whose index is between
 * {@code fromIndex}, inclusive, and {@code toIndex}, exclusive.
 * Shifts any succeeding elements to the left (reduces their index).
 * This call shortens the list by {@code (toIndex - fromIndex)} elements.
 * (If {@code toIndex==fromIndex}, this operation has no effect.)
 *
 * @param fromIndex index of first element to be removed
 * @param toIndex index after last element to be removed
 * @throws IndexOutOfBoundsException if fromIndex or toIndex out of range
 *         ({@code fromIndex &lt; 0 || toIndex &gt; size() || toIndex &lt; fromIndex})
 */
void removeRange(int fromIndex, int toIndex) {
    final ReentrantLock lock = this.lock;
    lock.lock();
    try {
        Object[] elements = getArray();
        int len = elements.length;

        if (fromIndex &lt; 0 || toIndex &gt; len || toIndex &lt; fromIndex)
            throw new IndexOutOfBoundsException();
        int newlen = len - (toIndex - fromIndex);
        int numMoved = len - toIndex;
        if (numMoved == 0)
            setArray(Arrays.copyOf(elements, newlen));
        else {
            Object[] newElements = new Object[newlen];
            System.arraycopy(elements, 0, newElements, 0, fromIndex);
            System.arraycopy(elements, toIndex, newElements,
                             fromIndex, numMoved);
            setArray(newElements);
        }
    } finally {
        lock.unlock();
    }
}
</code></pre></li>
<li><p>遍历</p>
<p> 遍历时，直接使用内部的数组，这样可以避开多线程时的问题,类似的还有indexOf</p>
<pre><code>public void forEach(Consumer&lt;? super E&gt; action) {
    if (action == null) throw new NullPointerException();
    Object[] elements = getArray();
    int len = elements.length;
    for (int i = 0; i &lt; len; ++i) {
        @SuppressWarnings(&quot;unchecked&quot;) E e = (E) elements[i];
        action.accept(e);
    }
}

public int indexOf(E e, int index) {
    Object[] elements = getArray();
    return indexOf(e, elements, index, elements.length);
}
</code></pre></li>
</ol>
<hr>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://showstone.net/java容器/2017/03/07/java容器-2015-06-27-copyonwritearray浅析/" data-id="cj8tp2v5x000cxb2sv7fpvi3c" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/copyonwritearray/">CopyOnWriteArray</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/容器/">容器</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-java容器-2015-06-24-java容器研究思路" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/java容器/2017/03/07/java容器-2015-06-24-java容器研究思路/" class="article-date">
  <time datetime="2017-03-07T08:20:00.000Z" itemprop="datePublished">2017-03-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/java容器/">java容器</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/java容器/2017/03/07/java容器-2015-06-24-java容器研究思路/">java容器研究思路</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#容器的研究思路</p>
<ul>
<li>为什么研究容器<br><ul>
<li>容器是JDK里的基础功能，平时使用得较多。</li>
<li>容器相对简单，比较容易研究</li>
<li>已经有很多人对容器进行了研究，相关资料比较齐全</li>
</ul>
</li>
<li>容器是什么，要研究那些特性<ul>
<li>容器是一段程序，是一系列的对象。</li>
<li>作为程序，它由 数据结构+算法构成</li>
<li>作为对象，它由 属性+方法构成</li>
<li>作为类，它有自己的继承树</li>
<li>容器有很多的工具类，如collections、Arrays、Iterator等等</li>
</ul>
</li>
<li>怎么去研究容器<ul>
<li>评价软件的4个因素:可维护性，可靠性，移植性，效率</li>
<li>如何去测试评估程序的特性</li>
<li>程序的并发性能</li>
<li>程序的极限性能</li>
</ul>
</li>
</ul>
<p>##容器的分类<br>容器分为list、set、Map等三大类</p>
<ul>
<li>list<br><br>  有序的数组<br>  有ArrayList,LinkedList,Vector,CopyOnwriteArrayList</li>
<li>set<br><br>  HashSet, TreeSet</li>
<li>Map<br><br>  HashMap,TreeMap,HashTable,LinkedHashMap,WeakHashMap</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://showstone.net/java容器/2017/03/07/java容器-2015-06-24-java容器研究思路/" data-id="cj8tp2v62000fxb2ss5is2e5b" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/容器/">容器</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-java容器-2015-06-24-arraylist" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/java容器/2017/03/07/java容器-2015-06-24-arraylist/" class="article-date">
  <time datetime="2017-03-07T08:20:00.000Z" itemprop="datePublished">2017-03-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/java容器/">java容器</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/java容器/2017/03/07/java容器-2015-06-24-arraylist/">ArrayList浅析</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#ArrayList浅析</p>
<ul>
<li>ArrayList的作用、特点</li>
<li>ArrayList的数据结构</li>
<li>ArrayList的常用方法及实现</li>
<li>ArrayList里需要注意的地方</li>
</ul>
<p>###ArrayList的作用、特点<br>ArrayList实现了List接口，常用操作有add,remove,get,size。其内部的数据采用数组进行存储。因此随机读写的速度很快，但删除、添加等操作相对会消耗比较多的时间，因为会有相关的一系列节点移动。</p>
<p>###ArrayList的数据结构<br>ArrayList内部以数组的形式存储数据。默认的是一个空数组，当添加数据后，会扩充为一个长度为10的数组。</p>
<pre><code>默认的空数组
/**
 * Constructs an empty list with an initial capacity of ten.
 */
public ArrayList() {
    super();
    this.elementData = EMPTY_ELEMENTDATA;
}

private static final Object[] EMPTY_ELEMENTDATA = {};
</code></pre><p>###ArrayList的常用方法及其实现<br>1.add()</p>
<p>加入元素之前，先确保有足够的空间</p>
<pre><code>public boolean add(E e) {&lt;br/&gt;
    ensureCapacityInternal(size + 1);  // Increments modCount!!
    elementData[size++] = e;
    return true;
}
</code></pre><p>指定位置加入元素时，之后所有的元素都需要后移</p>
<pre><code>public void add(int index, E element) {
    rangeCheckForAdd(index);

    ensureCapacityInternal(size + 1);  // Increments modCount!!
    System.arraycopy(elementData, index, elementData, index + 1, size - index);
    elementData[index] = element;
    size++;
}
</code></pre><h4 id="addAll"><a href="#addAll" class="headerlink" title="addAll"></a>addAll</h4><pre><code>public boolean addAll(Collection&lt;? extends E&gt; c) {
    Object[] a = c.toArray();
    int numNew = a.length;
    ensureCapacityInternal(size + numNew);  // Increments modCount
    System.arraycopy(a, 0, elementData, size, numNew);
    size += numNew;
    return numNew != 0;
}
</code></pre><p>2.remove</p>
<p>删除之前，先检查是否越界,同时也有大量的元素移动操作</p>
<pre><code>public E remove(int index) {
    rangeCheck(index);//简单地检查下标是否越界

    modCount++;
    E oldValue = elementData(index);

    int numMoved = size - index - 1;
    if (numMoved &gt; 0)
        System.arraycopy(elementData, index+1, elementData, index,
                         numMoved);
    elementData[--size] = null; // clear to let GC do its work

    return oldValue;
}
</code></pre><p>3.contain</p>
<pre><code>public boolean contains(Object o) {
    return indexOf(o) &gt;= 0;
}

public int indexOf(Object o) {
    if (o == null) {
        for (int i = 0; i &lt; size; i++)
            if (elementData[i]==null)
                return i;
    } else {
        for (int i = 0; i &lt; size; i++)
            if (o.equals(elementData[i]))
                return i;
    }
    return -1;
}
</code></pre><p>4.clone</p>
<pre><code>public Object clone() {
    try {
        @SuppressWarnings(&quot;unchecked&quot;)
            ArrayList&lt;E&gt; v = (ArrayList&lt;E&gt;) super.clone();
        v.elementData = Arrays.copyOf(elementData, size);
        v.modCount = 0;
        return v;
    } catch (CloneNotSupportedException e) {
        // this shouldn&apos;t happen, since we are Cloneable
        throw new InternalError();
    }
}
</code></pre><p>5.iterator</p>
<p>通过使用cursor和lastRet来进行标记</p>
<pre><code>private class Itr implements Iterator&lt;E&gt; {
    int cursor;       // index of next element to return
    int lastRet = -1; // index of last element returned; -1 if no such
    int expectedModCount = modCount;
    ...
}
</code></pre><p>###ArrayList里需要注意的地方</p>
<ul>
<li>sublist并没有创建一个新的ArrayList,只是加了一个下标的起点</li>
</ul>
<p>代码：</p>
<pre><code>public List&lt;E&gt; subList(int fromIndex, int toIndex) {
    subListRangeCheck(fromIndex, toIndex, size);
    return new SubList(this, 0, fromIndex, toIndex);
}

 private class SubList extends AbstractList&lt;E&gt; implements RandomAccess {
    private final AbstractList&lt;E&gt; parent;
    private final int parentOffset;
    private final int offset;
    int size;
    ...
}
</code></pre><p>所以在原来的List或者Sublist里的操作，都会影响到另一个list</p>
<ul>
<li>因为ArrayList是基于数组的，所以当添加的元素超过原来的数组大小时，它需要先创建一个新的数组，并把原来的元素复制过去。这在一定程序上会影响程序的性能。类似的操作有删除，根据上面的实现代码可以知道，每删除一个元素就会对它后面的元素进行移动。可以把那些需要删除的参数用一个list保存下来，然后用removeAll来一次全部删除。</li>
</ul>
<p>代码</p>
<pre><code>public boolean removeAll(Collection&lt;?&gt; c) {
    return batchRemove(c, false);
}

private boolean batchRemove(Collection&lt;?&gt; c, boolean complement) {
    final Object[] elementData = this.elementData;
    int r = 0, w = 0;
    boolean modified = false;
    try {
        for (; r &lt; size; r++)
            if (c.contains(elementData[r]) == complement)//这是一个比较巧妙的实现，值得学习
                elementData[w++] = elementData[r];
    } finally {
        // Preserve behavioral compatibility with AbstractCollection,
        // even if c.contains() throws.
        if (r != size) {
            System.arraycopy(elementData, r,
                             elementData, w,
                             size - r);
            w += size - r;
        }
        if (w != size) {
            // clear to let GC do its work
            for (int i = w; i &lt; size; i++)
                elementData[i] = null;
            modCount += size - w;
            size = w;
            modified = true;
        }
    }
    return modified;
}
</code></pre><ul>
<li>ArrayList里只定义了size和elementData两个元素,其他的都来自于父类AbstractList</li>
</ul>
<blockquote>
<p>protected transient int modCount = 0;</p>
<p>private int size;</p>
</blockquote>
<h3 id="以下是测试指定容器大小和让容器自动扩张比较的代码"><a href="#以下是测试指定容器大小和让容器自动扩张比较的代码" class="headerlink" title="以下是测试指定容器大小和让容器自动扩张比较的代码"></a>以下是测试指定容器大小和让容器自动扩张比较的代码</h3><pre><code>public static void main(String[] args) {
    long startTime = System.currentTimeMillis();
    for(int i=0;i&lt;100000;i++){
        ArrayList list = new ArrayList();
        for(int num=0;num&lt;1000;num++){
            list.add(&quot;object&quot;);
        }
    }
    System.out.println(&quot;用时:&quot;+ (System.currentTimeMillis()-startTime)+&quot;毫秒&quot;);
    startTime = System.currentTimeMillis();
    for(int i=0;i&lt;100000;i++){
        ArrayList list = new ArrayList(2000);
        for(int num=0;num&lt;1000;num++){
            list.add(&quot;object&quot;);
        }
    }
    System.out.println(&quot;用时:&quot;+ (System.currentTimeMillis()-startTime)+&quot;毫秒&quot;);
}
</code></pre><p>运行结果:</p>
<blockquote>
<p>用时:607毫秒<br>用时:415毫秒</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://showstone.net/java容器/2017/03/07/java容器-2015-06-24-arraylist/" data-id="cj8tp2v65000hxb2sk9tleisl" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/arraylist/">ArrayList</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/容器/">容器</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-java容器-2015-06-29-vector" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/java容器/2017/03/07/java容器-2015-06-29-vector/" class="article-date">
  <time datetime="2017-03-07T08:20:00.000Z" itemprop="datePublished">2017-03-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/java容器/">java容器</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/java容器/2017/03/07/java容器-2015-06-29-vector/">Vector浅析</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Vector与ArrayList很像，主要区别在于Vector是线程安全的。</p>
<p>Vector的类声明:     </p>
<blockquote>
<p>* </p><p>As of the Java 2 platform v1.2, this class was retrofitted to<br>* implement the {@link List} interface, making it a member of the<br>* <a href="{@docRoot}/../technotes/guides/collections/index.html"><br>* Java Collections Framework</a>.  Unlike the new collection<br>* implementations, {@code Vector} is synchronized.  If a thread-safe<br>* implementation is not needed, it is recommended to use {@link<br>* ArrayList} in place of {@code Vector}.  </p>
</blockquote>
<p>阅读源码后发现，Vector是通过给所有的外部类加上synchronized来实现线程安全的。这种实现方式很简单，但由于synchronized是对this加锁，所以当需要同时一个对象的多个方法时，效率就会很低。</p>
<p>另外，查看iterator的源码</p>
<pre><code>/**
 * Returns an iterator over the elements in this list in proper sequence.
 *
 * &lt;p&gt;The returned iterator is &lt;a href=&quot;#fail-fast&quot;&gt;&lt;i&gt;fail-fast&lt;/i&gt;&lt;/a&gt;.
 *
 * @return an iterator over the elements in this list in proper sequence
 */
public synchronized Iterator&lt;E&gt; iterator() {
    return new Itr();
}
</code></pre><p>可以发现，在返回遍历对象后，就已经退出了锁，如果修改了对象之后，再去遍历，则会抛出ConcurrentModificationException异常.   </p>
<pre><code>Vector&lt;String&gt; vector = new Vector&lt;String&gt;();
vector.add(&quot;abc&quot;);
Iterator&lt;String&gt; ite = vector.iterator();
vector.add(&quot;bcd&quot;);
while (ite.hasNext()) {
    System.out.println(ite.next());
}
</code></pre><p>运行结果：</p>
<pre><code>Exception in thread &quot;main&quot; java.util.ConcurrentModificationException
    at java.util.Vector$Itr.checkForComodification(Vector.java:1184)
    at java.util.Vector$Itr.next(Vector.java:1137)
    at com.showstone.containerresearch.list.VectorResearch.main(VectorResearch.java:14)
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://showstone.net/java容器/2017/03/07/java容器-2015-06-29-vector/" data-id="cj8tp2v67000kxb2svwedg5ai" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vector/">vector</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/容器/">容器</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/java/">Java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java容器/">Java容器</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mybatis源码分析/">Mybatis源码分析</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/eleme/">eleme</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java容器/">java容器</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/software/">software</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/小功能/">小功能</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/软件配置/">软件配置</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/arraylist/">ArrayList</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/copyonwritearray/">CopyOnWriteArray</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hashmap/">HashMap</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hashset/">HashSet</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jedisdataexception/">JedisDataException</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linkedhashmap/">LinkedHashMap</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linkedlist/">LinkedList</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mybatsis/">MyBatsis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nas服务器/">NAS服务器</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/proxy/">Proxy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/treeset/">TreeSet</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/command/">command</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/eleme/">eleme</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/forward/">forward</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http/">http</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lua/">lua</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/maven/">maven</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/netty/">netty</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rebase/">rebase</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis/">redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/soa/">soa</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/software/">software</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tmux/">tmux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/top/">top</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vector/">vector</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vim/">vim</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vine/">vine</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/下载/">下载</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/克制/">克制</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/命令/">命令</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/实用/">实用</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/容器/">容器</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/导出/">导出</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/常用/">常用</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/时间管理/">时间管理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/框架/">框架</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/源码/">源码</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/简洁之美/">简洁之美</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/精力管理/">精力管理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/结构/">结构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/编译/">编译</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/设计/">设计</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/走读/">走读</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/超大excel/">超大excel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/软件/">软件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/软件配置/">软件配置</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/镜像/">镜像</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/饿了么/">饿了么</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/arraylist/" style="font-size: 10px;">ArrayList</a> <a href="/tags/copyonwritearray/" style="font-size: 10px;">CopyOnWriteArray</a> <a href="/tags/hashmap/" style="font-size: 10px;">HashMap</a> <a href="/tags/hashset/" style="font-size: 10px;">HashSet</a> <a href="/tags/jedisdataexception/" style="font-size: 10px;">JedisDataException</a> <a href="/tags/linkedhashmap/" style="font-size: 10px;">LinkedHashMap</a> <a href="/tags/linkedlist/" style="font-size: 10px;">LinkedList</a> <a href="/tags/mybatsis/" style="font-size: 10px;">MyBatsis</a> <a href="/tags/nas服务器/" style="font-size: 16.67px;">NAS服务器</a> <a href="/tags/proxy/" style="font-size: 10px;">Proxy</a> <a href="/tags/treeset/" style="font-size: 10px;">TreeSet</a> <a href="/tags/command/" style="font-size: 10px;">command</a> <a href="/tags/eleme/" style="font-size: 10px;">eleme</a> <a href="/tags/forward/" style="font-size: 10px;">forward</a> <a href="/tags/git/" style="font-size: 13.33px;">git</a> <a href="/tags/http/" style="font-size: 10px;">http</a> <a href="/tags/java/" style="font-size: 20px;">java</a> <a href="/tags/linux/" style="font-size: 13.33px;">linux</a> <a href="/tags/lua/" style="font-size: 10px;">lua</a> <a href="/tags/maven/" style="font-size: 10px;">maven</a> <a href="/tags/netty/" style="font-size: 10px;">netty</a> <a href="/tags/python/" style="font-size: 10px;">python</a> <a href="/tags/rebase/" style="font-size: 10px;">rebase</a> <a href="/tags/redis/" style="font-size: 10px;">redis</a> <a href="/tags/soa/" style="font-size: 10px;">soa</a> <a href="/tags/software/" style="font-size: 13.33px;">software</a> <a href="/tags/tmux/" style="font-size: 10px;">tmux</a> <a href="/tags/top/" style="font-size: 10px;">top</a> <a href="/tags/vector/" style="font-size: 10px;">vector</a> <a href="/tags/vim/" style="font-size: 10px;">vim</a> <a href="/tags/vine/" style="font-size: 10px;">vine</a> <a href="/tags/下载/" style="font-size: 10px;">下载</a> <a href="/tags/克制/" style="font-size: 10px;">克制</a> <a href="/tags/命令/" style="font-size: 10px;">命令</a> <a href="/tags/实用/" style="font-size: 10px;">实用</a> <a href="/tags/容器/" style="font-size: 20px;">容器</a> <a href="/tags/导出/" style="font-size: 10px;">导出</a> <a href="/tags/常用/" style="font-size: 10px;">常用</a> <a href="/tags/时间管理/" style="font-size: 10px;">时间管理</a> <a href="/tags/框架/" style="font-size: 13.33px;">框架</a> <a href="/tags/源码/" style="font-size: 16.67px;">源码</a> <a href="/tags/简洁之美/" style="font-size: 10px;">简洁之美</a> <a href="/tags/精力管理/" style="font-size: 10px;">精力管理</a> <a href="/tags/结构/" style="font-size: 10px;">结构</a> <a href="/tags/编译/" style="font-size: 10px;">编译</a> <a href="/tags/设计/" style="font-size: 10px;">设计</a> <a href="/tags/走读/" style="font-size: 10px;">走读</a> <a href="/tags/超大excel/" style="font-size: 10px;">超大excel</a> <a href="/tags/软件/" style="font-size: 10px;">软件</a> <a href="/tags/软件配置/" style="font-size: 10px;">软件配置</a> <a href="/tags/镜像/" style="font-size: 10px;">镜像</a> <a href="/tags/饿了么/" style="font-size: 10px;">饿了么</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/uncategorized/2017/10/03/工具-2017-10-03-nas服务器的搭建-软件篇/">NAS服务器的搭建-软件篇</a>
          </li>
        
          <li>
            <a href="/uncategorized/2017/10/03/工具-2017-10-03-nas服务器的搭建-硬件篇/">NAS服务器的搭建--硬件篇</a>
          </li>
        
          <li>
            <a href="/uncategorized/2017/10/03/工具-2017-10-03-nas服务器的搭建-介绍/">NAS服务器的搭建-介绍</a>
          </li>
        
          <li>
            <a href="/小功能/2017/08/22/小功能-2017-08-22-下载超大的excel/">下载超大的excel</a>
          </li>
        
          <li>
            <a href="/java/2017/07/23/三瓜两爪-2017-07-23-克制/"> 克制</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 Shicheng Yuan<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>