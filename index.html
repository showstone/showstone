<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="听风的博客" type="application/atom+xml" />






<meta property="og:type" content="website">
<meta property="og:title" content="听风的博客">
<meta property="og:url" content="http://showstone.net/index.html">
<meta property="og:site_name" content="听风的博客">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="听风的博客">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://showstone.net/"/>





  <title>听风的博客</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?3f82c96c411fc76dd2a11abd27157116";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">听风的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">行走，辨思，记录</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://showstone.net/uncategorized/2018/12/07/交易型系统-2018-12-07-扣库存的方案/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Shicheng Yuan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="听风的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/uncategorized/2018/12/07/交易型系统-2018-12-07-扣库存的方案/" itemprop="url">扣库存的方案</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-07T15:10:19+08:00">
                2018-12-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="扣库存的场景及问题"><a href="#扣库存的场景及问题" class="headerlink" title="扣库存的场景及问题"></a>扣库存的场景及问题</h2><p>扣库存是电商系统里一个非常基础的操作。</p>
<p>在业务上，它必须要能达到：</p>
<ul>
<li>不超卖</li>
<li>重试时，不出现假卖</li>
</ul>
<p>在非功能需求上，它需要做到：</p>
<ul>
<li>应对高并发的流量</li>
</ul>
<h2 id="单件商品扣库存方案及其优化"><a href="#单件商品扣库存方案及其优化" class="headerlink" title="单件商品扣库存方案及其优化"></a>单件商品扣库存方案及其优化</h2><p>约定扣的库存数量为x</p>
<h3 id="方案一-直接更新库存"><a href="#方案一-直接更新库存" class="headerlink" title="方案一 直接更新库存"></a>方案一 直接更新库存</h3><p><img src="http://qiniu.yuanshicheng.com/2018-12-07-A123459C-0ECF-41D8-BA06-63F4E45D929F.png" alt="A123459C-0ECF-41D8-BA06-63F4E45D929F"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">update</span> sku_stock <span class="keyword">set</span> stock = stock - x;</div></pre></td></tr></table></figure>
<p>由于库存检查是在服务里做的，并发现情况下，容易出现超卖。<br>设原来的库存是5,用户a扣了库存4，b扣了库存2，流程如下:</p>
<ol>
<li>用户a检查库存</li>
<li>用户b检查库存</li>
<li>用户a扣库存4</li>
<li>用户b扣库存2</li>
<li>最终库存为-1</li>
</ol>
<h3 id="方案一优化-加锁（事务）"><a href="#方案一优化-加锁（事务）" class="headerlink" title="方案一优化 加锁（事务）"></a>方案一优化 加锁（事务）</h3><p>为了解决并发修改的问题，可以通过增加锁（事务)，把并发变成串行。<br><img src="http://qiniu.yuanshicheng.com/2018-12-07-0DDDE9F0-EEEF-434B-B4D0-AE025095233D.png" alt="0DDDE9F0-EEEF-434B-B4D0-AE025095233D"></p>
<p>这种方案可以解决并发上的问题，但是由于开启事务（锁）的时间较长，会导致严重的性能问题，同时，对于分库后的多个商品，还会存在多库事务的分布式事务问题，成本很高。</p>
<h3 id="方案三-优化锁：减少锁的持有时间"><a href="#方案三-优化锁：减少锁的持有时间" class="headerlink" title="方案三 优化锁：减少锁的持有时间"></a>方案三 优化锁：减少锁的持有时间</h3><p>为了优化锁，一个方式是减少锁的持有时间。可以考虑在扣库存时，增加一把乐观锁</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">update</span> sku_stock <span class="keyword">set</span> stock = stock - x <span class="keyword">where</span> stock = x0;</div></pre></td></tr></table></figure>
<h3 id="方案四-高并发下的扣库存设计"><a href="#方案四-高并发下的扣库存设计" class="headerlink" title="方案四  高并发下的扣库存设计"></a>方案四  高并发下的扣库存设计</h3><p>方案三能解决大部分场景下的扣库存问题，但当碰到秒杀、大促等场景时，由于商品库存有限，扣库存失败的概率很高，这里如果重复尝试扣库存，会对系统造成较大的压力，减少吞吐。</p>
<p>因此需要对并发的流量进行限流。可以考虑对每个商品的并发数加队列或锁，以减少同时并发的数目失败的概率。对于特别热门的商品，还可以把一个商品拆成多个子商品，以增大并发数目。</p>
<h3 id="扣库存的重试"><a href="#扣库存的重试" class="headerlink" title="扣库存的重试"></a>扣库存的重试</h3><p>当由于某种原因扣库存失败时，可能需要进行重试。由于扣库存不是一个幂等的操作，容易造成空卖。</p>
<p>可以通过给每个扣库存操作增加一个token来解决这个问题。当token已经使用过时，再次请求直接忽略。</p>
<h2 id="多件商品扣库存方案及其优化"><a href="#多件商品扣库存方案及其优化" class="headerlink" title="多件商品扣库存方案及其优化"></a>多件商品扣库存方案及其优化</h2><p>相比于单件商品的扣库存，同时扣多件商品的库存，需要考虑：</p>
<ol>
<li>同时有多个商品，修改、回滚的数目比较多</li>
<li>操作商品的模式</li>
</ol>
<p>最简单的方案是直接把多个商品放在一个事务来实现，但是这样有几个问题：</p>
<ol>
<li>事务时间比较长，还容易造成死锁</li>
<li>商品越多，扣库存失败的可能性越大</li>
</ol>
<p>对于第一个问题，可以把一个事务拆成多个事务，以加大系统吞吐量。这样做还有一个好处，就是这些商品可以不用在同一个库里了（mysql的事务是基于库实例实现的），从而避开了分布式事务的成本。</p>
<p>对于第二个问题，可以使用二阶段提交，先锁定所有商品的库存，然后统一提交。避免频繁回滚。</p>
<h2 id="从扣库存看高并发"><a href="#从扣库存看高并发" class="headerlink" title="从扣库存看高并发"></a>从扣库存看高并发</h2><p>扣库存是一个典型的业务型系统，具有以下特点：</p>
<ol>
<li>并发量高</li>
<li>数据量大</li>
<li>逻辑较轻</li>
</ol>
<p>它的难点主要体现在：</p>
<ol>
<li>大量高速交易</li>
<li>数据的一致性</li>
<li>应对各种业务、系统异常情况</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://showstone.net/小功能/2018/11/28/小功能-2018-11-28-Ouath-2-0-token申请时序图/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Shicheng Yuan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="听风的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/小功能/2018/11/28/小功能-2018-11-28-Ouath-2-0-token申请时序图/" itemprop="url">Ouath 2.0 token申请时序图</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-11-28T00:25:42+08:00">
                2018-11-28
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/小功能/" itemprop="url" rel="index">
                    <span itemprop="name">小功能</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在看Ouath 2.0时，发现对于申请token的两种方式—授权码模式、简化模式的时序图不太清楚，于是自己画了一次时序图，以助自己理解。同时也放在这里供参考。</p>
<p>学习资料:<br><a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html" target="_blank" rel="external">理解OAuth 2.0 - 阮一峰的网络日志</a><br><a href="https://tools.ietf.org/html/rfc6749#section-7" target="_blank" rel="external">OAuth 2.0 官方文档</a></p>
<h2 id="授权码模式2018-11-28-授权码模式时序图-png"><a href="#授权码模式2018-11-28-授权码模式时序图-png" class="headerlink" title="授权码模式2018-11-28-授权码模式时序图.png"></a>授权码模式2018-11-28-授权码模式时序图.png</h2><p><img src="http://qiniu.yuanshicheng.com/2018-11-30-%E6%8E%88%E6%9D%83%E7%A0%81%E6%A8%A1%E5%BC%8F%E6%97%B6%E5%BA%8F%E5%9B%BE.png" alt="授权码模式时序图"></p>
<p>其中，第三方服务对于官方文档里的“client”</p>
<h2 id="简化模式"><a href="#简化模式" class="headerlink" title="简化模式"></a>简化模式</h2><p><img src="http://qiniu.yuanshicheng.com/2018-11-30-%E7%AE%80%E5%8C%96%E6%A8%A1%E5%BC%8F%E6%97%B6%E5%BA%8F%E5%9B%BE.png" alt="简化模式时序图"></p>
<p>其中，第三方服务对于官方文档里的“client”</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://showstone.net/工具/2018/11/27/工具-2018-11-27-记一次失败的mac平台下载工具探索/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Shicheng Yuan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="听风的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/工具/2018/11/27/工具-2018-11-27-记一次失败的mac平台下载工具探索/" itemprop="url">记一次失败的mac平台下载工具探索</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-11-27T02:11:45+08:00">
                2018-11-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/工具/" itemprop="url" rel="index">
                    <span itemprop="name">工具</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近小伙伴分享了很多好照片给我，由于内容较多，是通过百度云盘分享的。而我电脑上百度云盘的下载速度平均只有50k/s, 全部文件下载完成需要上百小时，这时想起好像有工具可以加速下载，同时NAS也缺一个下载工具，正好可以把Arial用起来。</p>
<p>说做就做，打开官网开始研究，发现其使用十分简单。考虑到需要在不同的地方使用，最好用docker的方式使用，便于分享。</p>
<h2 id="docker下的arial使用"><a href="#docker下的arial使用" class="headerlink" title="docker下的arial使用"></a>docker下的arial使用</h2><p>找到一个star最多的工具 <a href="https://hub.docker.com/r/xujinkai/aria2-with-webui/" target="_blank" rel="external">https://hub.docker.com/r/xujinkai/aria2-with-webui/</a><br>开始以docker-compose使用，发现一直在报错<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[ERROR] IPv6 RPC: failed to bind TCP port 6800</div></pre></td></tr></table></figure></p>
<p>找到docker的官网，把ipv6打开  <a href="https://docs.docker.com/v17.09/engine/userguide/networking/default_network/ipv6/" target="_blank" rel="external">IPv6 with Docker | Docker Documentation</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;ipv6&quot;: true,</div><div class="line">  &quot;fixed-cidr-v6&quot;: &quot;2001:db8:1::/64&quot;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>重启，发现还是不行。一直认为是自己环境的问题，于是找了台ubuntu的机器，运行命令:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">docker run \</div><div class="line">--name aria2-with-webui \</div><div class="line">-p 6800:6800 \</div><div class="line">-p 6880:80 \</div><div class="line">-p 6888:8080 \</div><div class="line">xujinkai/aria2-with-webui</div></pre></td></tr></table></figure></p>
<p>可以正常访问。</p>
<p>怀疑是mac的问题，折腾了多处配置，均无果。开始以最简单的方式在mac下运行:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">docker run \</div><div class="line">xujinkai/aria2-with-webui</div></pre></td></tr></table></figure></p>
<p>发现可以运行，最后发现只要用了docker-compose，就不能用，不用就可以。</p>
<h2 id="反思与总结"><a href="#反思与总结" class="headerlink" title="反思与总结"></a>反思与总结</h2><p>对于工具，要多一些对其本身的怀疑，我就是一直觉得是镜像的问题，没有考虑过docker-compose，结果一直没有找到问题。</p>
<p>大里来说，要多思考，多分析，不要对觉得一些问题是理所当然，不可能出问题的。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://showstone.net/工具/2018/06/18/杂文-2018-06-18-《学习之道-》笔记之外的感想/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Shicheng Yuan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="听风的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/工具/2018/06/18/杂文-2018-06-18-《学习之道-》笔记之外的感想/" itemprop="url">《学习之道》笔记之外的感想</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-06-18T20:51:42+08:00">
                2018-06-18
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/工具/" itemprop="url" rel="index">
                    <span itemprop="name">工具</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="方法-规律的作用"><a href="#方法-规律的作用" class="headerlink" title="方法/规律的作用"></a>方法/规律的作用</h2><p>今天整理了《学习之道》最后部分的读书笔记，花了三个小时，细细算了下，阅读3小时+笔记7小时=总共10小时，共234页，想起来年初时，看《如何阅读一本书》（297页），类似的内容，光阅读和理解前后就至少花了有30个小时（笔记至今还没整理好，估计是有生之年了…），效率相差近10倍（光阅读）。不能不感叹方法/工具的巨大效果。</p>
<p>更不用学习体验了。年初时，看《如何阅读一本书》的场景还历历在目，多翻几页，脑袋就像被塞满了东西，再也接受不了一个新的概念。等到《学习之道》时，心中满是作者会怎么聊这个话题的好奇，就像看电视剧会猜剧情走向，不时用自己的理解和作者要讲的内容以及讲述技巧作对比，明显有趣多了。</p>
<h2 id="为什么一直没有意识到这些规律？"><a href="#为什么一直没有意识到这些规律？" class="headerlink" title="为什么一直没有意识到这些规律？"></a>为什么一直没有意识到这些规律？</h2><p>一直以来，都是勤劳、苦干被宣扬，类似于“劳动模范”、“战斗一百天”这种(背后的原因蛮好玩的，有兴趣的可以私聊讨论)，而改进工作方法、效率却并不怎么突出，应该是一个社会原因。</p>
<p>当然，最重要的还是个人意识上原因。学习/阅读方法只是马恩毛列一个微不足道的应用。事实上，我也是在理解并应用了结构化思想之后，才用好这套学习方法的。</p>
<p>马恩毛列是指马克思、恩克思、毛泽东、列宁等一系列大神的思想，主要是唯物主义相关的，具体的我也搞不清楚，毕竟是一个只看过导读的人…</p>
<p>吐槽:<br>都在说要发扬传统文化，但是传统文化中的坑是真的多，随便举两个:</p>
<ol>
<li>书读百遍，其意自现。你和一个医学生，说“书读百遍，其意自现”试试，他会教你做人的。一方面，这些知识太多，没有太多的时间去读百遍，另一方面，有些东西，没有正确的方式，永远也不可能学会。</li>
<li>头悬梁，锥刺股。从医学上来说，充分、适当的休息，对于学习和考试丟关重要。从我个人经历上来说，休息充分的一个小时，抵得上疲劳战术的10个小时不止。</li>
</ol>
<h2 id="好玩的规律"><a href="#好玩的规律" class="headerlink" title="好玩的规律"></a>好玩的规律</h2><p>对于规律，我的认知是4个步骤:认识规律，学习规律，遵守规律，利用规律。以学习为例，学习成果可以就一个公式简单地表示:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">s=vt</div><div class="line">s指总的学习成果, v只学习速度，t指学习时间</div></pre></td></tr></table></figure></p>
<p>平常学习，要得到最多的学习成果，那么有两种选择:</p>
<ol>
<li>提高学习效率</li>
<li>增加学习时间<br>学习时间受限于工作，以及精力，基本是个常数（固定的数），增长的空间非常小，所以，要学习，就只能提高学习效率了。</li>
</ol>
<p>准备考试时，要学习的东西(s)一定，那么，有两个优化的选择:</p>
<ol>
<li>提高学习效率</li>
<li>增加学习时间<br>这里就能说明，为什么会有人选择脱产准备考试了。然后脱产后的时间也还是常数，再次说明了学习效率的重要性！！！</li>
</ol>
<p>如果几天后就要考试了，那时间(t)就是个常数了，这里，有这些选择:</p>
<ol>
<li>提高学习效率。然而大部分情况下，肯定是学不完这些知识的</li>
<li>少学一些内容，只学最重要的那部分，反正60分万岁嘛</li>
<li>把所有内容分成几部分，应该是有难有易的，分值也是有高有低，那么，把分值和难度（需要花的时间）一除，按单位价值从高到低去学就好了</li>
</ol>
<p>这就是规律的一个简单应用，是不是很好玩？</p>
<h2 id="为什么那么久都没有用起来结构化思考的方法？"><a href="#为什么那么久都没有用起来结构化思考的方法？" class="headerlink" title="为什么那么久都没有用起来结构化思考的方法？"></a>为什么那么久都没有用起来结构化思考的方法？</h2><p>了解一个东西分几个步骤:</p>
<ol>
<li>了解：知道有这么个东西，但是细节不清楚。重点是知道</li>
<li>知识：能记住，能用，但是不会主动用。重点是理解细节</li>
<li>技能：需要时，能主动使用，但是不会迁移。在特定情景下，能用出来</li>
<li>本能：已经是意识的一部分，能用的时候，会自动地用出来。对其理解比较透彻，能用的时候可以随意使用</li>
</ol>
<p>我们学到的大部分东西都停留在技能层面，从技能到本能的机会实在是太少了，很难跨过技能到本能的沟。我自己用的时候，主要是需求导向，即如何解决我碰到的问题，不断去思考尝试。</p>
<p>还有一个是主动的建立思维锚点，即多想想技能的背景、上下文、优缺点、条件与作用等。这样做应该是一个长期的工作，至少1年后再来谈效果吧。</p>
<h2 id="买书"><a href="#买书" class="headerlink" title="买书"></a>买书</h2><p>这阵子618，很多同事说，家里还有好几本书没看完，先不买了。我其实不太认同，因为人一直在成长，以前买的书，只是和那时的自己、环境相适应，现在需要新的书和资料来帮助我们，自然需要新的书。</p>
<p>而且书这种东西，很多时候，看起来是消费，但其实是投资的。投入大量的时间和少量的金钱，来谋取未来的回报。投资要的是高回报率以及高的整体回报，如果能通过少量的金钱（和时间相比，买书的钱可以忽略好吧）来优化书的质量，进而提高整体学习效率，最终抬高整体的回报，无疑是一件非常划算的事情。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://showstone.net/设计模式/2018/05/24/设计模式-2018-05-24-命令模式推导及应用场景浅析/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Shicheng Yuan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="听风的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/设计模式/2018/05/24/设计模式-2018-05-24-命令模式推导及应用场景浅析/" itemprop="url">命令模式推导及应用场景浅析</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-24T13:48:08+08:00">
                2018-05-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/设计模式/" itemprop="url" rel="index">
                    <span itemprop="name">设计模式</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          命令模式
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/设计模式/2018/05/24/设计模式-2018-05-24-命令模式推导及应用场景浅析/">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://showstone.net/工具/2018/05/19/software-2018-05-19-Keyboard-Maestro介绍/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Shicheng Yuan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="听风的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/工具/2018/05/19/software-2018-05-19-Keyboard-Maestro介绍/" itemprop="url">Keyboard Maestro介绍</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-19T19:38:15+08:00">
                2018-05-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/工具/" itemprop="url" rel="index">
                    <span itemprop="name">工具</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          自动化你的工作
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/工具/2018/05/19/software-2018-05-19-Keyboard-Maestro介绍/">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://showstone.net/uncategorized/2018/03/20/python-2018-03-20-python-依赖管理简介/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Shicheng Yuan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="听风的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/uncategorized/2018/03/20/python-2018-03-20-python-依赖管理简介/" itemprop="url">python 依赖管理简介</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-20T16:18:05+08:00">
                2018-03-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>python 虽然好用，但是项目一多，依赖的管理就是个大问题了，新项目已经全在用 python3，而老项目都是 pthon2，更蛋疼的是，不同项目之间还可能依赖了同一个库的不同版本！我们试着解决这个问题:</p>
<h2 id="pip-解决项目的全局依赖问题"><a href="#pip-解决项目的全局依赖问题" class="headerlink" title="pip: 解决项目的全局依赖问题"></a>pip: 解决项目的全局依赖问题</h2><p>最开始的时候，我们都是手动安装库，而库可能还有依赖的库，这样最终会形成一张树的依赖结构。解决这个问题，我们可以使用 pip。</p>
<p>它主要解决包的问题，包括安装、更新、删除等。<br>简介: <a href="https://pip.pypa.io/en/stable/quickstart/" target="_blank" rel="external">https://pip.pypa.io/en/stable/quickstart/</a><br>安装: <a href="https://pip.pypa.io/en/stable/installing/" target="_blank" rel="external">https://pip.pypa.io/en/stable/installing/</a></p>
<h2 id="virtualenv-解决不同项目间使用同一依赖不同版本的问题"><a href="#virtualenv-解决不同项目间使用同一依赖不同版本的问题" class="headerlink" title="virtualenv: 解决不同项目间使用同一依赖不同版本的问题"></a>virtualenv: 解决不同项目间使用同一依赖不同版本的问题</h2><p>pip 可以帮助我们方便地安装项目需要的依赖，不过随着项目的变多，我们可能会在不同的项目里使用同一个库的不同版本，甚至python 的不同版本，这时，需要一个新的工具来解决这个问题: virtualenv。</p>
<p>它可以帮助我们创建一个虚拟、独立的依赖环境，以保证每个项目可以使用指定的依赖，包括 python、第三方库等。</p>
<h2 id="conda-解决非python依赖的问题，以及简单统一的操作方式"><a href="#conda-解决非python依赖的问题，以及简单统一的操作方式" class="headerlink" title="conda: 解决非python依赖的问题，以及简单统一的操作方式"></a>conda: 解决非python依赖的问题，以及简单统一的操作方式</h2><p>pip 和 virtualenv的组合，可以解决绝大部分 python的依赖管理问题，但是，随着项目的发展，我们可能需要非 python 的依赖，来解决现有问题。</p>
<p>conda 作为一个打包工具和安装程序，可以帮助我们解决主流的开发环境和依赖的问题，除 python 外，它还支持：R, Ruby, Lua, Scala, Java, JavaScript, C/C++, FORTRAN等语言。一定程度上，可以把它看着 pip 和 virtualenv 的结合（实际上，pip 和 conda 是互补的关系，因为 pip 可以安装一部分 conda 不能安装的依赖）。</p>
<p><a href="https://www.anaconda.com/what-is-anaconda/" target="_blank" rel="external">官网</a> (很卡，不推荐，建议使用下面的镜像)<br><a href="https://mirror.tuna.tsinghua.edu.cn/help/anaconda/" target="_blank" rel="external">国内镜像</a></p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>virtualenv和conda都是通过修改 shell 里的环境变量来达到修改环境的目的，基本原理类似。<br>不同的项目可以用不同的工具，不要求全，适合才是最好的。<br>Pycharm 对以上工具都有很好的支持，善用工具可以极大提高效率。  </p>
<p>以下是参考资料:<br><a href="https://zhuanlan.zhihu.com/p/32925500" target="_blank" rel="external">Anaconda介绍、安装及使用教程</a><br><a href="http://python.jobbole.com/85588/" target="_blank" rel="external">Anacodna之conda与 virtualenv对比使用教程，创建虚拟环境</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://showstone.net/java/2018/02/13/java-2018-02-13-java8里lambda里的-this-为什么会指向-lamdba-所在的外部类/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Shicheng Yuan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="听风的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/java/2018/02/13/java-2018-02-13-java8里lambda里的-this-为什么会指向-lamdba-所在的外部类/" itemprop="url">java8里lambda里的 this 为什么会指向 lamdba 所在的外部类</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-02-13T12:34:59+08:00">
                2018-02-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">JAVA</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这几天复习了 lambda ，发现有个细节，十分难以理解，那就是 lambda 里的 this指针。</p>
<p>Lambda 里的this指针指向其所属的内部类， 是怎么实现的呢？</p>
<p>写了一个例子，作为测试:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.function.Supplier;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LambdaTest</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        <span class="keyword">new</span> LambdaTest().test();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</div><div class="line">        String para = <span class="string">"abc"</span>;</div><div class="line">        String para2 = <span class="string">"abc"</span>;</div><div class="line">        System.out.println(<span class="keyword">this</span>);</div><div class="line">        Supplier&lt;String&gt; supplier = () -&gt; &#123;</div><div class="line">            <span class="keyword">return</span> para + para2;</div><div class="line">        &#125;;</div><div class="line">        System.out.println(supplier.get());</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>对应的jvm 机器码是:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">private static java.lang.String lambda$test$0(java.lang.String, java.lang.String);</div><div class="line">  descriptor: (Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;</div><div class="line">  flags: ACC_PRIVATE, ACC_STATIC, ACC_SYNTHETIC</div><div class="line">  Code:</div><div class="line">    stack=2, locals=2, args_size=2</div><div class="line">       0: new           #12                 // class java/lang/StringBuilder</div><div class="line">       3: dup</div><div class="line">       4: invokespecial #13                 // Method java/lang/StringBuilder.&quot;&lt;init&gt;&quot;:()V</div><div class="line">       7: aload_0</div><div class="line">       8: invokevirtual #14                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;</div><div class="line">      11: aload_1</div><div class="line">      12: invokevirtual #14                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;</div><div class="line">      15: invokevirtual #15                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;</div><div class="line">      18: areturn</div><div class="line">    LineNumberTable:</div><div class="line">      line 16: 0</div></pre></td></tr></table></figure></p>
<p>通过方法签名可以知道，如果一个类没有带 this,被编译成了一个静态内部类方法。</p>
<p>带 this：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.function.Supplier;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LambdaTest</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        <span class="keyword">new</span> LambdaTest().test();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</div><div class="line">        String para = <span class="string">"abc"</span>;</div><div class="line">        String para2 = <span class="string">"abc"</span>;</div><div class="line">        System.out.println(<span class="keyword">this</span>);</div><div class="line">        Supplier&lt;String&gt; supplier = () -&gt; &#123;</div><div class="line">            System.out.println(<span class="keyword">this</span>);</div><div class="line">            <span class="keyword">return</span> para + para2;</div><div class="line">        &#125;;</div><div class="line">        System.out.println(supplier.get());</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>对应的 jvm 机器码:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">private java.lang.String lambda$test$0(java.lang.String, java.lang.String);</div><div class="line">  descriptor: (Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;</div><div class="line">  flags: ACC_PRIVATE, ACC_SYNTHETIC</div><div class="line">  Code:</div><div class="line">    stack=2, locals=3, args_size=3</div><div class="line">       0: getstatic     #6                  // Field java/lang/System.out:Ljava/io/PrintStream;</div><div class="line">       3: aload_0</div><div class="line">       4: invokevirtual #7                  // Method java/io/PrintStream.println:(Ljava/lang/Object;)V</div><div class="line">       7: new           #12                 // class java/lang/StringBuilder</div><div class="line">      10: dup</div><div class="line">      11: invokespecial #13                 // Method java/lang/StringBuilder.&quot;&lt;init&gt;&quot;:()V</div><div class="line">      14: aload_1</div><div class="line">      15: invokevirtual #14                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;</div><div class="line">      18: aload_2</div><div class="line">      19: invokevirtual #14                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;</div><div class="line">      22: invokevirtual #15                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;</div><div class="line">      25: areturn</div><div class="line">    LineNumberTable:</div><div class="line">      line 15: 0</div><div class="line">      line 16: 7</div></pre></td></tr></table></figure></p>
<p>lambda 被编译成了一种内部类！这就能说通了。</p>
<p>结论:</p>
<blockquote>
<p>lambda一般情况下会被编译成静态匿名方法，引用的外部变量以参数的方式传递。<br>如果 lambda 里使用了this 指标，则被编译为匿名内部方法，以让 this 指针指向lambda 外部类。</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://showstone.net/工具/2017/12/11/工具-2017-12-11-Nas服务器的外网访问配置/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Shicheng Yuan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="听风的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/工具/2017/12/11/工具-2017-12-11-Nas服务器的外网访问配置/" itemprop="url">Nas服务器的外网访问配置</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-11T02:11:45+08:00">
                2017-12-11
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/工具/" itemprop="url" rel="index">
                    <span itemprop="name">工具</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>之前使用花生壳的DDNS实现了Nas服务的外网访问，可以在公司访问家里的timeMachine.瞬间觉得自己的数据安全了很多。<br>可惜好景不长。没多久就发现家里的文件没有通过samba访问。于是开始折腾Nas系统，发现官方推荐上https，同时为了统一访问体验，决定上子域名。以下是折腾的记录。</p>
<h2 id="子域名的两种方案"><a href="#子域名的两种方案" class="headerlink" title="子域名的两种方案"></a>子域名的两种方案</h2><p>查找资料后发现，要实现子域名的DDNS,有两种方案:</p>
<ol>
<li>购买花生壳的付费二级域名，然后在二级域名的基础上使用三级域名。优点是简单、方便、便宜。可以不用备案。</li>
<li>自己购买顶级的域名，然后通过脚本更新DNS记录。优点是掌控度高。</li>
</ol>
<h2 id="买花生壳的付费二级域名"><a href="#买花生壳的付费二级域名" class="headerlink" title="买花生壳的付费二级域名"></a>买花生壳的付费二级域名</h2><p>比较过两种方案后，我决定还是买花生壳的付费二级域名。反正是给自己用的，输入域名的机会不多，长几个短几个字母问题不大。</p>
<p>首先购买</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://showstone.net/信息化时代的个人行动指南/2017/10/31/信息化时代的个人行动指南-2017-10-31-如何快速找到想要的信息/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Shicheng Yuan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="听风的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/信息化时代的个人行动指南/2017/10/31/信息化时代的个人行动指南-2017-10-31-如何快速找到想要的信息/" itemprop="url">如何快速找到想要的信息</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-10-31T13:05:21+08:00">
                2017-10-31
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/信息化时代的个人行动指南/" itemprop="url" rel="index">
                    <span itemprop="name">信息化时代的个人行动指南</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>我们在一个信息爆炸的时代，互联网给我们带来丰富信息的同时，也造成了很大的负担，如何在网上快速准确的找到想要的信息，是一个很重要的技巧。</p>
<p>常见的信息来源有：</p>
<ul>
<li>搜索引擎等通用搜索</li>
<li>stack over flow等专业领域知识</li>
<li>知乎、搜狗（用于查询微信公众号的内容）等封闭社区</li>
</ul>
<p>下面两类，主要在于平时的积累，这里重点说说搜索引擎：</p>
<h2 id="搜索引擎"><a href="#搜索引擎" class="headerlink" title="搜索引擎"></a>搜索引擎</h2><p>搜索引擎处于互联网的中心，连接了各种信息。使用时，可以从一个点出发，然后不断缩小范围，最终找到想要的信息。</p>
<p>以查询“天龙八部”的出处背景为例：<br>直接输入“天龙八部”会是这样：<br><img src="http://7xqf9w.com1.z0.glb.clouddn.com/15094236205724.jpg" alt=""></p>
<p>如果知道“天龙八部”与佛教相关，可以输入“天龙八部 佛教”：<br><img src="http://7xqf9w.com1.z0.glb.clouddn.com/15094237342672.jpg" alt=""></p>
<p>如果不知道与佛教相关，则可以先了解它的背景：<br><img src="http://7xqf9w.com1.z0.glb.clouddn.com/15094240222029.jpg" alt=""></p>
<h3 id="常见的拓展信息"><a href="#常见的拓展信息" class="headerlink" title="常见的拓展信息"></a>常见的拓展信息</h3><ul>
<li>本身的描述，如apple可能是水果，也可能是科技公司</li>
<li>背景信息，如历史时间段、行业等</li>
<li>相关信息，如一个人的学校、籍贯等</li>
</ul>
<h3 id="搜索引擎的功能"><a href="#搜索引擎的功能" class="headerlink" title="搜索引擎的功能"></a>搜索引擎的功能</h3><p>google支持以下功能的搜索：<br><img src="http://7xqf9w.com1.z0.glb.clouddn.com/15093574576046.jpg" alt=""></p>
<ul>
<li>查询多个关键词，以空格分开</li>
<li>查询短语，用英文的引号（“”）分开</li>
<li>查询任意一个词,用 OR 分开</li>
<li>排除某个词，用  - 分开</li>
<li>数字范围，用 .. 表示</li>
</ul>
<p>同时，还可以对搜索的结果做一些限制：</p>
<ul>
<li>时间范围</li>
<li>特定网站</li>
<li>在页面的特定位置，如title、页眉、正文等，甚至是url、链接</li>
<li>资源的类型，如pdf、ppt、word等</li>
</ul>
<p>其他技巧：</p>
<ul>
<li>通配符  “*”</li>
<li>搜索缓存<br>在相应网址前加上“cache:”</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Shicheng Yuan</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">35</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">12</span>
                  <span class="site-state-item-name">分类</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">73</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Shicheng Yuan</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
