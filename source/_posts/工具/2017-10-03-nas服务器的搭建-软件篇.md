---
title: NAS服务器的搭建-软件篇
date: 2017-10-03 02:38:09
tags: NAS服务器
---
顺利装好机器，是时候试试它的威力了，开始折腾软件.

# NAS服务器的搭建-软件篇
顺利装好机器，是时候试试它的威力了，开始折腾软件.

## NAS软件功能
* 外网访问。这么牛逼的东东，光在家用怎么行，必须要能在公网访问啊
* 文件共享。如samba或者ftp
* 下载。要支持远程下载，http下载有aria2,bt/pt下载有transmission
* DLNA服务。可以在线看视频啦~
* iTunes媒体共享
* time machine等备份服务
* 和百度云盘等公有云同步
* 类似于百度云等云盘的私有云服务

## 外网访问配置
根据是否有公网ip，可以采用不同的方案。
我用的是电信光纤，是有公网ip的，这个具体和运营商有关，可以打客服电话，说要装监控，需要外网访问，看他怎么说。
### 有公网Ip
这种方案需要做端口映射。
首先找电信改成桥接模式，或者让电信给一个能做端口映射的光猫。
然后在路由器上设置端口映射或DMZ。
现在已经可以在公网上访问本机了，但是每次拨号ip都会变，最好能有一个域名，能通过这个域名知道现在的ip--这个就是DDNS服务了，大部分人用的都是花生壳的。具体方式请自行google
### 没有公网ip
可以使用内网穿透。网上评价很差，不建议使用。具体使用方式请自行google

## NAS软件方案
NAS服务器的软件，有几种方案:

* 方案一：NAS裸机安装Windows，可在虚拟机中安装Linux，群晖，软路由。推荐。Windows对硬件兼容性好，驱动普遍支持，能无需配置充分发挥显卡性能，平时可做上网机，观影机，HTPC高清电视。
* 方案二：NAS裸机安装Linux，可在虚拟机中安装Windows，群晖，软路由。技术宅推荐。Windows还是有些缺陷的，系统及某些流氓软件会莫名其妙唤醒全部硬盘。只要能驱动，Linux多媒体不是问题。没有迅雷下载有点问题，移植的也麻烦，可以在Win虚拟机里面迅雷。
* 方案三：NAS裸机安装群晖，可在虚拟机中安装Windows，Linux，软路由。不推荐。NAS的显卡都浪费了。NAS中集成的功能当然做得很用户友好，非常方便。但是没有的功能很多需要自己编译源码，没有Linux发行版的软件仓库方便，很鸡肋。

注1：以上群晖都可以换成其他NAS操作系统。
注2：不推荐裸机安装NAS操作系统。

以上内容来自：[搭建家庭 NAS 服务器有什么好方案？](https://www.zhihu.com/question/21359049)

## NAS裸机安装Linux方案
选择NAS裸机安准Linux是因为我要跑脚本，用Linux会方便很多。同时，网上说的驱动问题我没有碰到，用最新版本的系统应该可以解决这个问题，毕竟Linux对Intel的支持还是很好的。我用的是Ubuntu 17.04.

对现有主流的NAS操作系统做了一个调研,发现NAS操作系统太重了，除openmeidavault外，都需要组Raid,对我而言没有必要。

* http://www.how2shout.com/tools/best-free-open-source-nas-software.html
* http://storageroot.com/articles/nas4free-freenas-amahi-openmediavault

其中，freenas和nas4free，都使用了ZFS文件系统，而ZFS文件系统依赖ECC内存，同时要求8G以上内存。
考虑以上原因，决定不上NAS操作系统。

### 类似于百度云等云盘的私有云服务
主流的方案有 owncloud和seafile。评测:
[https://www.zhihu.com/question/46318905](https://www.zhihu.com/question/46318905)

网上对seafile的评价较高，所以选择了seafile.具体如何，等我试用一个月再说~~

### 文件共享
* ftp/sftp文件协议。使用不方便，pass
* SMB协议。操作方便，速度很快，推荐使用

### 下载
留坑待填~~

### DLNA服务
留坑待填~~

### iTunes媒体共享
留坑待填~~

### time machine等备份服务
#### mac
* Netatalk。它是AFP协议的开源实现
* Avahi。它是Apple’s Zeroconf 协议的开源实现
安装使用方式请自行百度。
***　注意文件的权限，建议可以先设成777，等没问题后再恢复　 ***

### 和百度云盘等公有云同步
留坑待填~~



